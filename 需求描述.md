# 新增需求

## 数据源
新增一个菜单，叫做数据源，数据源需要有一个面板来进行增删改查的面板，参考回收站，目前新增时暂时只需要一个直播源功能，后续
根据需要可以进行扩展数据源

### 直播源功能
点击新增时弹出新增框参数如下：
- 数据源类型：目前数据源类型仅支持直播源（使用枚举来固定，后续类型不一样参数也可能不一样）
- 直播源地址，目前仅支持RTMP/RTSP直播流协议然后连接
- 文件保存地址，可以选中一个文件系统的路径

点击确定后，数据源列表显示对应的数据，如果是直播源数据源后面操作按钮有一个播放按钮，当点击播放按钮时
新增一个live_preview_panel.py直播源的预览面板并且切换中间的面板，参考video_preview_panel面板来实现播放直播源；
直播源预览面板需要支持下面的功能：
- 录制视频：点击开始录制当前视频并且视频保存到上面弹出框指定的路径下面，可以开始可以暂停
- 按键截图：参考video_preview_panel面板来实现按W键截图功能，文件同录制视频一样的路径
- 直播源停止：点击停止按钮，停止直播源播放
- 右侧详情需要展示对应的录制了的视频、截图等

注意：当我切换文件资源时，也需要将对应的直播源给关闭释放掉资源


## 标注功能
新增一个菜单叫做自动标注，下面有两个子菜单分别是模式配置和自动标注

### 模型配置
点击模型配置需要有一个功能面板来弹出可以进行增删改查，参考回收站功能，当我点击新增
时，会有弹框出来填写信息：
- 模型名称：随意填写
- 标注类型：支持yolo、openai两种自动标注类型，类型不一样，参数值也不一样
- yolo类型参数
  - 模型名称：模型名称目前支持下拉框选择，默认支持yolov8.pt也就是yolo默认支持的所有默认都可以下拉选择，支持自定义模型（选择自定义模型选择后打开文件系统来选择一个yolo可用的模型）
  - 分类：支持多个分类，注意是yolo中需要关注的分类，需要识别哪些
- openai类型参数
  - openai的api地址
  - apikey
  - 模型名称
  - 提示词：可以自定义需要的提示词，角色默认是user

### 自动标注
自动标注的功能跟模型配置一样，点击菜单后需要弹出一个功能面板，参考回收站功能，点击新增时，会有弹框出来填写信息：
- 模型：下拉列表选择模型配置中配置好的模型名称
- 数据集：选择当前软件管理的文件夹，下拉框选择

功能按钮：
- 开始标注
- 停止标注
- 删除

功能实现说明：
- 开始标注
  - 开始标注时，需要根据模型的配置来实现，使用策略模式根据当前使用的模型配置来选择对应的策略，目前是yolo和openai（模式使用openai的框架来调用），对应的策略请按照yolo和openai的调用来实现
  - 读取指定的文件夹下面无论层级下面的图片文件然后调用对应的策略进行标注，注意大模型需要内置系统级提示词告诉大模型输出的结构为yolo标注结构
  - 标注的结果需要保存到对应数据集下面的labels路径下面，因为当前软件标注会自动读取labels下面的标注文件
- 停止标注：停止当前正在标注的任务
- 删除任务：需要删除当前数据包括保存路径下面的所有标注文件（注意只删除自动标注的数据和标注文件，不要删除数据集）


### 数据集划分
新增菜单按钮数据集划分功能，当我点击菜单后，需要弹出一个信息输入的面板，可以实现对指定文件夹的数据集按照指定的比例进行分割，参数如下：
- 数据集路径：选择一个数据集路径
- 训练集比例
- 测试集比例
- 验证集比例
- 输出路径：选择一个保存路径，保存训练集、测试集、验证集
实现的逻辑是：读取当前路径下面的所有图片和标注文件，按照参数指定的比例进行分割，然后保存到指定路径下面，保存的文件格式为标注的yolo训练集格式，train下面包含images、labels这种

注意：上面的需求均按照模块分开开发，并且你需要补充我的需求细节，自动标注等逻辑都是需要参考yolo的标准训练逻辑来实现，包括大模型的调用输出；在实现时需要参考当前项目的文件管理的逻辑来实现保存、数据持久化的操作
